# èœå•æµç¨‹æ–‡æ¡£ (Menu Flow Documentation)

## ä¸»èœå•ç»“æ„ (Main Menu Structure)

```
ğŸ  ä¸»èœå• (Main Menu)
â”‚
â”œâ”€â”€ ğŸ“ è´¦æˆ·ç®¡ç† (Account Management)
â”‚   â”œâ”€â”€ â• ä¸Šä¼ è´¦æˆ· (Upload Account)
â”‚   â”œâ”€â”€ ğŸ“‹ è´¦æˆ·åˆ—è¡¨ (Account List)
â”‚   â”œâ”€â”€ ğŸ—‘ï¸ åˆ é™¤è´¦æˆ· (Delete Account)
â”‚   â”œâ”€â”€ ğŸ”„ åˆ·æ–°çŠ¶æ€ (Refresh Status)
â”‚   â””â”€â”€ ğŸ”™ è¿”å›ä¸»èœå• (Back to Main Menu)
â”‚
â”œâ”€â”€ ğŸ”— é“¾æ¥ç®¡ç† (Link Management)
â”‚   â”œâ”€â”€ â• æ·»åŠ é“¾æ¥ (Add Link)
â”‚   â”œâ”€â”€ ğŸ“„ ä¸Šä¼ TXT (Upload TXT)
â”‚   â”œâ”€â”€ ğŸ“‹ é“¾æ¥åˆ—è¡¨ (Link List)
â”‚   â”œâ”€â”€ ğŸ—‘ï¸ æ¸…ç©ºé“¾æ¥ (Clear Links)
â”‚   â””â”€â”€ ğŸ”™ è¿”å›ä¸»èœå• (Back to Main Menu)
â”‚
â”œâ”€â”€ âš™ï¸ åŠ ç¾¤è®¾ç½® (Join Settings)
â”‚   â”œâ”€â”€ â±ï¸ ä¿®æ”¹é—´éš” (Modify Interval)
â”‚   â”œâ”€â”€ ğŸ“Š ä¿®æ”¹ä¸Šé™ (Modify Limit)
â”‚   â””â”€â”€ ğŸ”™ è¿”å›ä¸»èœå• (Back to Main Menu)
â”‚
â”œâ”€â”€ ğŸš€ å¼€å§‹ä»»åŠ¡ (Start Task)
â”‚   â”œâ”€â”€ â¸ï¸ æš‚åœ (Pause)
â”‚   â”œâ”€â”€ â–¶ï¸ ç»§ç»­ (Resume)
â”‚   â”œâ”€â”€ â¹ï¸ åœæ­¢ (Stop)
â”‚   â””â”€â”€ ğŸ”™ è¿”å›ä¸»èœå• (Back to Main Menu)
â”‚
â”œâ”€â”€ ğŸ“Š ç»Ÿè®¡é¢æ¿ (Statistics Panel)
â”‚   â””â”€â”€ ğŸ”™ è¿”å›ä¸»èœå• (Back to Main Menu)
â”‚
â””â”€â”€ ğŸ“‹ æ—¥å¿—æŸ¥çœ‹ (View Logs)
    â””â”€â”€ ğŸ”™ è¿”å›ä¸»èœå• (Back to Main Menu)
```

## æ“ä½œæµç¨‹ (Operation Flow)

### 1. è´¦æˆ·ç®¡ç†æµç¨‹ (Account Management Flow)

```
å¼€å§‹ â†’ ğŸ“ è´¦æˆ·ç®¡ç†
  â†“
  â”œâ”€ â• ä¸Šä¼ è´¦æˆ·
  â”‚   â”œâ”€ å‘é€ session string
  â”‚   â”œâ”€ éªŒè¯è´¦æˆ·
  â”‚   â””â”€ âœ… æ·»åŠ æˆåŠŸ / âŒ å¤±è´¥
  â”‚
  â”œâ”€ ğŸ“‹ è´¦æˆ·åˆ—è¡¨
  â”‚   â””â”€ æ˜¾ç¤ºæ‰€æœ‰è´¦æˆ·åŠçŠ¶æ€
  â”‚
  â”œâ”€ ğŸ—‘ï¸ åˆ é™¤è´¦æˆ·
  â”‚   â”œâ”€ é€‰æ‹©è´¦æˆ·
  â”‚   â””â”€ âœ… åˆ é™¤ç¡®è®¤
  â”‚
  â””â”€ ğŸ”„ åˆ·æ–°çŠ¶æ€
      â””â”€ æ£€æŸ¥æ‰€æœ‰è´¦æˆ·åœ¨çº¿çŠ¶æ€
```

### 2. é“¾æ¥ç®¡ç†æµç¨‹ (Link Management Flow)

```
å¼€å§‹ â†’ ğŸ”— é“¾æ¥ç®¡ç†
  â†“
  â”œâ”€ â• æ·»åŠ é“¾æ¥
  â”‚   â”œâ”€ å‘é€å•ä¸ªé“¾æ¥
  â”‚   â””â”€ âœ… æ·»åŠ æˆåŠŸ
  â”‚
  â”œâ”€ ğŸ“„ ä¸Šä¼ TXT
  â”‚   â”œâ”€ ä¸Šä¼  TXT æ–‡ä»¶
  â”‚   â”œâ”€ è§£æé“¾æ¥
  â”‚   â””â”€ âœ… æ‰¹é‡æ·»åŠ æˆåŠŸ
  â”‚
  â”œâ”€ ğŸ“‹ é“¾æ¥åˆ—è¡¨
  â”‚   â””â”€ æ˜¾ç¤ºæ‰€æœ‰é“¾æ¥
  â”‚
  â””â”€ ğŸ—‘ï¸ æ¸…ç©ºé“¾æ¥
      â”œâ”€ âš ï¸ ç¡®è®¤æç¤º
      â””â”€ âœ… æ¸…ç©ºæˆåŠŸ
```

### 3. è®¾ç½®æµç¨‹ (Settings Flow)

```
å¼€å§‹ â†’ âš™ï¸ åŠ ç¾¤è®¾ç½®
  â†“
  â”œâ”€ â±ï¸ ä¿®æ”¹é—´éš”
  â”‚   â”œâ”€ è¾“å…¥æ ¼å¼: 30-60
  â”‚   â””â”€ âœ… è®¾ç½®æˆåŠŸ
  â”‚
  â””â”€ ğŸ“Š ä¿®æ”¹ä¸Šé™
      â”œâ”€ è¾“å…¥æ•°å­—: 50
      â””â”€ âœ… è®¾ç½®æˆåŠŸ
```

### 4. ä»»åŠ¡æ‰§è¡Œæµç¨‹ (Task Execution Flow)

```
å¼€å§‹ â†’ ğŸš€ å¼€å§‹ä»»åŠ¡
  â†“
  â”œâ”€ æ£€æŸ¥è´¦æˆ·å’Œé“¾æ¥
  â”‚   â”œâ”€ âŒ æ— è´¦æˆ· â†’ ç»“æŸ
  â”‚   â””â”€ âŒ æ— é“¾æ¥ â†’ ç»“æŸ
  â”‚
  â”œâ”€ å¼€å§‹å¾ªç¯åŠ ç¾¤
  â”‚   â”œâ”€ é€‰æ‹©è´¦æˆ·
  â”‚   â”œâ”€ é€‰æ‹©é“¾æ¥
  â”‚   â”œâ”€ æ‰§è¡ŒåŠ ç¾¤
  â”‚   â”œâ”€ âœ… æˆåŠŸ / âŒ å¤±è´¥
  â”‚   â”œâ”€ è®°å½•ç»Ÿè®¡
  â”‚   â”œâ”€ éšæœºå»¶è¿Ÿ
  â”‚   â””â”€ æ£€æŸ¥é™åˆ¶
  â”‚
  â””â”€ ä»»åŠ¡æ§åˆ¶
      â”œâ”€ â¸ï¸ æš‚åœ â†’ æš‚åœå¾ªç¯
      â”œâ”€ â–¶ï¸ ç»§ç»­ â†’ æ¢å¤å¾ªç¯
      â””â”€ â¹ï¸ åœæ­¢ â†’ ç»ˆæ­¢ä»»åŠ¡
```

## æ•°æ®åº“ç»“æ„ (Database Structure)

### accounts (è´¦æˆ·è¡¨)
```sql
CREATE TABLE accounts (
    id INTEGER PRIMARY KEY,
    user_id INTEGER,
    phone TEXT,
    session_string TEXT,
    status TEXT,  -- online/offline/unauthorized
    added_date DATETIME
);
```

### links (é“¾æ¥è¡¨)
```sql
CREATE TABLE links (
    id INTEGER PRIMARY KEY,
    user_id INTEGER,
    link TEXT,
    added_date DATETIME
);
```

### stats (ç»Ÿè®¡è¡¨)
```sql
CREATE TABLE stats (
    id INTEGER PRIMARY KEY,
    user_id INTEGER,
    account_id INTEGER,
    link TEXT,
    status TEXT,  -- success/failed/error
    message TEXT,
    timestamp DATETIME
);
```

### settings (è®¾ç½®è¡¨)
```sql
CREATE TABLE settings (
    user_id INTEGER PRIMARY KEY,
    interval_min INTEGER,  -- é»˜è®¤ 30
    interval_max INTEGER,  -- é»˜è®¤ 60
    daily_limit INTEGER    -- é»˜è®¤ 50
);
```

## çŠ¶æ€ç è¯´æ˜ (Status Codes)

### è´¦æˆ·çŠ¶æ€ (Account Status)
- `online` - åœ¨çº¿å¯ç”¨
- `offline` - ç¦»çº¿
- `unauthorized` - æœªæˆæƒ

### åŠ ç¾¤ç»“æœ (Join Result)
- `success` - åŠ ç¾¤æˆåŠŸ
- `failed` - åŠ ç¾¤å¤±è´¥ï¼ˆå¦‚å·²åœ¨ç¾¤ã€é“¾æ¥è¿‡æœŸç­‰ï¼‰
- `error` - ç³»ç»Ÿé”™è¯¯

## é”™è¯¯å¤„ç† (Error Handling)

### å¸¸è§é”™è¯¯
1. **FloodWaitError** - æ“ä½œè¿‡äºé¢‘ç¹
   - å¤„ç†ï¼šæ˜¾ç¤ºç­‰å¾…æ—¶é—´
   
2. **UserAlreadyParticipantError** - å·²åœ¨ç¾¤ä¸­
   - å¤„ç†ï¼šè·³è¿‡ï¼Œæ ‡è®°ä¸ºå¤±è´¥
   
3. **InviteHashExpiredError** - é‚€è¯·é“¾æ¥è¿‡æœŸ
   - å¤„ç†ï¼šè·³è¿‡ï¼Œæ ‡è®°ä¸ºå¤±è´¥
   
4. **ChannelPrivateError** - ç¾¤ç»„ç§æœ‰
   - å¤„ç†ï¼šè·³è¿‡ï¼Œæ ‡è®°ä¸ºå¤±è´¥

## é…ç½®è¯´æ˜ (Configuration)

### ç¯å¢ƒå˜é‡
```bash
BOT_TOKEN=your_bot_token
API_ID=your_api_id
API_HASH=your_api_hash
```

### ç›®å½•ç»“æ„
```
jqbot/
â”œâ”€â”€ jqbot.py           # ä¸»ç¨‹åº
â”œâ”€â”€ requirements.txt   # ä¾èµ–
â”œâ”€â”€ README.md          # è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ .env.example       # é…ç½®ç¤ºä¾‹
â”œâ”€â”€ .gitignore        # Git å¿½ç•¥
â”œâ”€â”€ jqbot.db          # æ•°æ®åº“ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
â”œâ”€â”€ sessions/         # Session ç›®å½•ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
â””â”€â”€ logs/            # æ—¥å¿—ç›®å½•ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
```

## å®‰å…¨å»ºè®® (Security Recommendations)

1. **ä¿æŠ¤æ•æ„Ÿä¿¡æ¯**
   - ä¸è¦åˆ†äº« session string
   - ä¸è¦ä¸Šä¼  .env æ–‡ä»¶åˆ° Git
   - ä½¿ç”¨ .gitignore æ’é™¤æ•æ„Ÿæ–‡ä»¶

2. **åˆç†è®¾ç½®å‚æ•°**
   - æ—¶é—´é—´éš”ï¼šå»ºè®® 30-60 ç§’
   - æ¯æ—¥ä¸Šé™ï¼šå»ºè®® â‰¤ 50
   - é¿å…è¿‡äºé¢‘ç¹æ“ä½œ

3. **è´¦æˆ·ç®¡ç†**
   - ä½¿ç”¨å¤‡ç”¨è´¦å·æµ‹è¯•
   - å®šæœŸæ£€æŸ¥è´¦å·çŠ¶æ€
   - éµå®ˆ Telegram ä½¿ç”¨æ¡æ¬¾
